<%- include('../includes/register/loginHead.ejs') %>



<!--================Login Box Area =================-->

<section class="login_box_area section-margin">
    <div class="container">
        <div class="row">
            <!-- <div class="col-lg-6">
                <div class="login_box_img">
                    <div class="hover">
                        <h4>New to our website?</h4>
                        <a class="button button-account" href="register.html">Create an Account</a>
                    </div>
                </div>
            </div> -->
            <div class="col-12">
                
                <div class="login_form_inner">
                    
                        
                    
                    <!-- <a href="./index.html"><img style="margin-top: -5rem;" src="/user/img/logo.png" alt=""></a> -->
                    <h3>Log in to enter</h3>
                    <form class="row login_form" method="POST" action="/login" id="register_form" onsubmit="return userLogin()" >

                        <!-- error message ( Invalid username or password ) -->
                        <% if( err) { %>
                            <div class="col-md-12 form-group" >
                              <label id="errDiv"  
                              style="border: 1px solid rgb(196, 0, 0); padding: 15px 0; width: 100%; background-color: rgb(255, 172, 172); color: rgb(196, 0, 0);" 
                              for=""><%= err %></label>
                            </div>
                            <% } else { %>
                                <% } %>

                        <div class="col-md-12 form-group">
                            <input type="text" class="form-control" id="email" name="email" placeholder="Email" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Email'">
                        </div>
                        <div class="col-md-12 form-group">
                            <input type="text" class="form-control" id="password" name="password" placeholder="Password" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Password'">
                        </div>
                        <div class="col-md-12 form-group">
                            <div class="creat_account">
                            </div>
                        </div>
                        <div class="col-md-12 form-group">
                            <button
                                type="submit"
                                value="submit"
                                class="button button-register w-100"
                            >
                                Login
                            </button>
                            <a href="#">Forgot Password?</a>
                        </div>
                    </form>
                    <P>Don't have an account? <a href="/signup">Signup</a></P>
                    <br>
                </div>
            </div>
        </div>
    </div>
</section>
<!--================End Login Box Area =================-->


<!--================ Validation  =================-->



<script>

function userLogin(){

    console.log(1);
    
    // Get form input values
    var email = document.getElementById('email').value.trim();
    var password = document.getElementById('password').value.trim();
    
    var error = document.getElementById( 'errDiv' )
    
    
    
    if (email === '' || password === '') {
          console.log(2);
          // Fields are empty, display an error message
          error.innerHTML = 'Fields Should not be empty'
          return false
        } 
        
        console.log(3);
        
        // Regular expression for email validation
        
        var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            console.log(4);
            error.innerHTML = 'Enter valid email'
            return false
        }
        
        console.log(5);
        return true
        }
  </script>

<%- include('../includes/register/loginEnd.ejs') %>































<!-- <script>
    document.querySelector('#register_form').addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent the form from submitting


  
      // Get form input values
      var email = document.getElementById('email').value.trim();
      var password = document.getElementById('password').value.trim();

      var error = document.getElementById( 'errDiv' )
  
      // Remove any existing error messages
      var errorMessages = document.querySelectorAll('.error-message');
      errorMessages.forEach(function(errorMessage) {
        errorMessage.remove();
      });
  
      var hasError = false; // Track if there is any error
  
      if (email === '' || password === '') {
        // Fields are empty, display an error message
        var emptyFieldsErrorMessage = document.createElement('div');
        emptyFieldsErrorMessage.className = 'col-md-12 form-group error-message';
        emptyFieldsErrorMessage.innerHTML = `
          <label   
            style="border: 1px solid rgb(196, 0, 0); padding: 15px 0; width: 100%; background-color: rgb(255, 172, 172); color: rgb(196, 0, 0);"
            for=""
          >
            Fields should not be empty  
          </label>
        `;
        var form = document.querySelector('#register_form');
        form.insertBefore(emptyFieldsErrorMessage, form.firstChild);
        hasError = true;
      } else {
        
          // Regular expression for email validation
          var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  
          if (!emailRegex.test(email)) {
            // Email is invalid, display an error message
            var emailErrorMessage = document.createElement('div');
            emailErrorMessage.className = 'col-md-12 form-group error-message';
            emailErrorMessage.innerHTML = `
              <label   
                style="border: 1px solid rgb(196, 0, 0); padding: 15px 0; width: 100%; background-color: rgb(255, 172, 172); color: rgb(196, 0, 0);"
                for="email"
              >
                Invalid email address
              </label>
            `;
            var form = document.querySelector('#register_form');
            form.insertBefore(emailErrorMessage, form.firstChild);
            hasError = true;
          } 
          }

      if (!hasError) {
        // No errors, proceed with form submission
        this.submit();
      }
    });
  </script> -->