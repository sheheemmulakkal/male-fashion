
<%- include('../includes/admin/adminHead.ejs') %>
<%- include('../includes/admin/adminNavbar.ejs') %>

<style>
    .category-name span p{
        width: 200px;
        overflow: hidden;
        text-overflow: ellipsis;
    } 
    .modal-content p{
        width: 400px;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    @media( max-width : 499px){
        .modal-content p{
        width: calc(100% - 44px);
        overflow: hidden;
        text-overflow: ellipsis;
    }
    }
</style>


<div class="main-panel">
    <div class="content-wrapper">

        <!-- ======= Form ======== -->

        <div class="col-12 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h4 class="card-title">Add category</h4>
                <div id="errorContainer" class="alert alert-danger" style="display: none;"></div> <!-- Error container -->
                <% if( err.length > 0 ) { %>
                    <div id="catExist" class="alert alert-danger"><%= err %></div> <!-- Error container exist category -->
                <% } %>
                <form class="forms-sample" action="/admin/add-category" method="POST" id="category">
                  <div class="form-group">
                    <input type="text" name="category" class="form-control" id="category-field" placeholder="Add category" required>
                  </div>
                  <button type="submit" class="btn btn-primary mr-2">Add</button>    
                </form>
              </div>
            </div>
          </div>

          <!-- ======================== success model ========================= -->
          
        <% if( success.length > 0 ) { %>
            <!-- The popup message modal -->
            <div id="popupModal" class="modal fade" tabindex="-1">
                <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content bg-dark text-white">
                    <div class="modal-body">
                    <h5 class="modal-title">Success</h5><br>
                    <p><%= success %></p>
                    </div>
                </div>
                </div>
            </div>
        <% } %>
  
  


        <!-- ======================== Table ========================= -->
        <div class="row mt-5">
            <div class="col-12 grid-margin">
            <div class="card">
                <div class="card-body">
                <h4 class="card-title">Category</h4>
                <div class="table-responsive">
                    <table class="table">
                    <thead>
                        <tr>
                            <th> Category Name </th>
                            <th> Status </th>
                        </tr>
                    </thead>
                    <tbody>
                        <% for( let items of category ) { %>
                            <tr>
                       
                                <td class="category-name">
                                    <span class="pl-2"><p><%= items.category %></p></span>
                                </td>
        
                                <td>
                                    <a href="/admin/edit-category/<%= items._id %>"><button type="button" class="btn btn-dark btn-icon-text"> Edit <i class="mdi mdi-file-check btn-icon-append"></i>
                                    </button></a>
                                    <% if( items.status) { %>
                                    <div class="badge"><a class="badge badge-outline-success" href="/admin/unlist-category/<%= items._id %>">Listed</a></div>
                                    <% } else { %>
                                        <div class="badge"><a class="badge badge-outline-danger" href="/admin/list-category/<%= items._id %>">Unlisted</a></div>
                                    <% } %>
                                </td>
                                
                                </tr>
                        <% } %>
                        
                    </tbody>
                    </table>
                </div>
                </div>
            </div>
            </div>
        </div>

    </div>
</div>

</div>
</div>

<%- include('../includes/validations/addCategoryV.ejs') %>

<%- include('../includes/admin/adminFooter.ejs') %>